# **31장 RegExp**

- [**31장 RegExp**](#31장-regexp)
  - [**들어가며 🎈**](#들어가며-)
  - [**정규 표현식이란?**](#정규-표현식이란)
  - [**정규 표현식의 생성**](#정규-표현식의-생성)
  - [**RegExp 메서드**](#regexp-메서드)
    - [**RegExp.prototype.exec**](#regexpprototypeexec)
    - [**RegExp.prototype.test**](#regexpprototypetest)
    - [**String.prototype.match**](#stringprototypematch)
  - [**플래그**](#플래그)
  - [**패턴**](#패턴)
    - [**문자열 검색**](#문자열-검색)
    - [**임의의 문자열 검색**](#임의의-문자열-검색)
    - [**반복 검색**](#반복-검색)
    - [**OR 검색**](#or-검색)
    - [**NOT 검색**](#not-검색)
    - [**시작 위치로 검색**](#시작-위치로-검색)
    - [**마지막 위치로 검색**](#마지막-위치로-검색)
  - [**자주 사용하는 정규 표현식**](#자주-사용하는-정규-표현식)
    - [**특정 단어로 시작하는지 검사**](#특정-단어로-시작하는지-검사)
    - [**특정 단어로 끝나는지 검사**](#특정-단어로-끝나는지-검사)
    - [**숫자로만 이루어진 문자열인지 검사**](#숫자로만-이루어진-문자열인지-검사)
    - [**하나 이상의 공백으로 시작하는지 검사**](#하나-이상의-공백으로-시작하는지-검사)
    - [**아이디로 사용 가능한지 검사**](#아이디로-사용-가능한지-검사)
    - [**메일 주소 형식에 맞는지 검사**](#메일-주소-형식에-맞는지-검사)
    - [**핸드폰 번호 형식에 맞는지 검사**](#핸드폰-번호-형식에-맞는지-검사)
    - [**특수문자 포함 여부 검사**](#특수문자-포함-여부-검사)

<br>

## **들어가며 🎈**

본 정리글은 이웅모강사님의 모던 자바스크립트 Deep Dive를 공부하고 습득하기 위해 제 나름대로 정리한 글 입니다. 보다 상세한 정보를 원하신다면 해당 서적을 참고하시길 바랍니다.

<br>

## **정규 표현식이란?**

- 정규 표현식은 문자열을 대상으로 패턴 매칭 기능을 제공한다.
  - 패턴 매칭 기능이란 특정 패턴과 일치하는 문자열을 검색하거나 추출 또는 치환할 수 있는 기능을 말한다.

```javascript
const tel = '010-1234-567팔';

const regExp = /^\d{3}-\d{4}-\d{4}$/;

regExp.test(tel); // -> false
```

- 정규 표현식을 사용하면 반복문과 조건문 없이 패턴을 정의하고 테스트하는 것으로 간단히 체크할 수 있다.
- 다만 주석이나 공백을 허용하지 않고 여러 가지 기호를 혼합하여 사용하기 때문에 가독성이 좋지 않다는 문제가 있다.

<br>

---

## **정규 표현식의 생성**

- 정규 표현식 리터럴
  - 패턴과 플래그로 구성된다
- `RegExp` 생성자 함수

```javascript
// 정규 표현식 리터럴
const regexp = /is/i; // 시작기호 패턴 종료기호 플래그

// 생성자 함수
const regexp2 = new RegExp(/is/i); // ES6
```

<br>

---

## **RegExp 메서드**

### **RegExp.prototype.exec**

- 인수로 전달받은 문자열에 대해 정규 표현식의 패턴을 검색하여 매칭 결과를 배열로 반환한다.
- 매칭 결과가 없는 경우 `null`을 반환한다.

<br>

### **RegExp.prototype.test**

- 인수로 전달받은 문자열에 대해 정규 표현식의 패턴을 검색하여 매칭 결과를 불리언 값으로 반환한다.

<br>

### **String.prototype.match**

- `String` 표준 빌트인 객체가 제공하는 `match` 메서드는 대상 문자열과 인수로 전달받은 정규 표현식과의 매칭 결과를 배열로 반환한다.
- `exec` 메서드는 문자열 내의 모든 패턴을 검색하는 `g` 플래그를 지정해도 첫 번째 매칭 결과만 반환한다. 하지만 `String.prototype.match` 메서드는 `g` 플래그가 지정되면 모든 매칭 결과를 배열로 반환한다.

```javascript
const target = 'Is this all there is?';

const regExp = /is/g;

target.match(regExp); // -> ["is", "is"]
```

<br>

---

## **플래그**

패턴과 함께 정규 표현식을 구성하는 플래그는 정규 표현식의 검색 방식을 설정하기 위해 사용한다. 플래그는 총 6개 있다. 그 중 중요한 3개의 플래그를 살펴보자.

| 플래그 | <center>의미</center> | <center>설명</center>                                          |
| :----: | --------------------- | -------------------------------------------------------------- |
|  `i`   | Ignore case           | 대소문자를 구별하지 않고 패턴을 검색한다                       |
|  `g`   | Global                | 대상 문자열 내에서 패턴과 일치하는 모든 문자열을 전역 검색한다 |
|  `m`   | Multi Line            | 문자열의 행이 바뀌더라도 패턴 검색을 계속한다                  |

<br>

---

## **패턴**

- 패턴은 문자열의 일정한 규칙을 표현하기 위해 사용한다.
- 패턴은 `/` 로 열고 닫으며 문자열의 따옴표는 생략한다. 따옴표를 포함하면 따옴표까지도 패턴에 포함되어 검색된다.
- 특별한 의미를 가지는 메타 문자(_meta character_) 또는 기호로 표현할 수 있다.
- 어떤 문자열 내에 패턴과 일치하는 문자열이 존재할 때 '정규 표현식과 매치한다.'고 표현한다.

<br>

### **문자열 검색**

- 검색 대상 문자열과 플래그를 생략한 정규 표현식의 매칭 결과를 구하면 대소문자를 구별하여 정규 표현식과 매치한 첫 번째 결과만 반환한다.
- 대소문자를 구별하지 않고 검색하려면 플래그 `i`를 사용한다.
- 검색 대상 문자열 내에서 패턴과 매치하는 모든 문자열을 전역 검색하려면 플래그 `g`를 사용한다.

<br>

### **임의의 문자열 검색**

- `.`은 임이의 문자 한 개를 의미한다.(문자의 내용은 무엇이든 상관없다.)
- `.`을 3개 연속하여 생성하면 문자의 내용과 상관없이 3자리 문자열과 매칭한다.

<br>

### **반복 검색**

- `{m,n}`은 앞선 패턴이 최소 m번, 최대 n번 반복되는 문자열을 의미한다.  
   콤마 뒤에 공백이 있으면 정상 동작하지 않으므로 주의하자.

  ```javascript
  const target = 'A AA B BB Aa Bb AAA';

  // 'A'가 최소 1번, 최대 2번 반복되는 문자열을 전역 검색한다.
  const regExp = /A{1,2}/g;
  // const regExp = /A{1, 2}/g; // 콤마뒤 공백 ❌

  target.match(regExp); // -> ["A", "AA", "A", "AA", "A"]
  ```

  <br>

- `{n}`은 앞선 패턴이 n번 반복되는 문자열을 의미한다. 즉 `{n}`은 `{n,n}`과 같다.

  ```javascript
  const target = 'A AA B BB Aa Bb AAA';

  // 'A'가 2번 반복되는 문자열을 전역 검색한다.
  const regExp = /A{2}/g;

  target.match(regExp); // -> ["AA", "AA"]
  ```

  <br>

- `{n,}`은 앞선 패턴이 최소 n번 이상 반복되는 문자열을 의미한다.

  ```javascript
  const target = 'A AA B BB Aa Bb AAA';

  // 'A'가 최소 2번 이상 반복되는 문자열을 전역 검색한다.
  const regExp = /A{2,}/g;

  target.match(regExp); // -> ["AA", "AAA"]
  ```

  <br>

- `+`는 앞선 패턴이 최소 한번 이상 반복되는 문자열을 의미한다. 즉 `+`는 `{1,}`과 같다.  
   다음 예제의 경우는 `A+`앞선 패턴 `'A'`가 한번 이상 반복되는 문자열, 즉 `'A'`만으로 이루어진 문자열 `'A'`, `'AA'`, `'AAA'`, ... 와 매치한다.

  ```javascript
  const target = 'A AA B BB Aa Bb AAA';

  // 'A'가 최소 한 번 이상 반복되는 문자열을 전역 검색한다
  const regExp = /A+/g;

  target.match(regExp); // -> ["A", "AA", "A", "AAA"]
  ```

  <br>

- `?`는 앞선 패턴이 최대 한번(0번 포함) 이상 반복되는 문자열을 의미한다. 즉 `?`는 `{0,1}`과 같다.  
  다음 예제의 경우 `/colou?r/`는 `'cole'` 다음 `'u'` 가 최대 한 번(0번 포함) 이상 반복되고 `'r'`이 이어지는 문자열 `'color'`, `'colour'`와 매치한다.

  ```javascript
  const target = 'color colour';

  // 'colo' 다음 'u'가 최대 한 번(0번 포함) 이상 반복되고 'r'이 이어지는
  // 문자열 'color', 'colour'를 전역 검색한다
  const regExp = /colou?r/g;

  target.match(regExp); // -> ["color", "colour"]
  ```

<br>

### **OR 검색**

- `|`은 or의 의미를 갖는다. `/A|B/`는 `'A'` 또는 `'B'`를 의미한다.
- 분해되지 않은 단어 레벨로 검색하기 위해서는 `+`를 함께 사용한다.
- 범위를 지정하려면 `[]` 내에 `-`를 사용한다.
- `\d`는 숫자를 의미한다. `\d`는 `[0-9]`와 같다. 이와 반대로 `\D`는 문자를 의미한다.
- `\w`는 알파벳, 숫자, 언더스코어를 의미한다. `\w`는 `[A-Za-z0-9_]`와 같다. `\W`는 `\w`와 반대로 알파벳, 숫자, 언더스코어가 아닌 문자를 의미한다.

<br>

### **NOT 검색**

`[...]` 내의 `^`는 not의 의미를 갖는다. (ex. `[^0-9]`는 숫자를 제외한 문자를 의미)

<br>

### **시작 위치로 검색**

`[...]` 밖의 `^`은 문자열의 시작을 의미한다. 단, `[...]` 내의 `^`은 not의 의미를 가지므로 주의하자.

```javascript
const target = 'https://poiemaweb.com';

// 'https'로 시작하는지 검사한다
const regExp = /^https/;

target.match(regExp); // -> true
```

<br>

### **마지막 위치로 검색**

`$`는 문자열의 마지막을 의미한다.

```javascript
const target = 'https://poiemaweb.com';

// 'com'로 시작하는지 검사한다
const regExp = /com$/;

target.match(regExp); // -> true
```

<br>

---

## **자주 사용하는 정규 표현식**

### **특정 단어로 시작하는지 검사**

```javascript
const url = 'https://example.com';

/^https?:\/\//.test(url); // true
```

<br>

### **특정 단어로 끝나는지 검사**

```javascript
const fileName = 'index.html';

/html$/.test(fileName); // true
```

<br>

### **숫자로만 이루어진 문자열인지 검사**

- `[...]`밖의 `^`는 문자열의 시작
- `$` 는 문자열의 마지막
- `\d` 는 숫자를 의미
- `+` 는 앞선 패턴이 최소 한 번 이상 반복되는 문자열을 의미

```javascript
const target = '12345';

/^\d+$/.test(target); // true
```

<br>

### **하나 이상의 공백으로 시작하는지 검사**

- `\s`는 여러 가지 공백 문자(스페이스, 탭 등)를 의미
- 즉, `\s`는 `[\t\r\n\v\f]`와 같은 의미

```javascript
const target = '  hi!';

/^[\s]+/.test(target); // true
```

<br>

### **아이디로 사용 가능한지 검사**

- `[...]`밖의 `^`는 문자열의 시작
- `$` 는 문자열의 마지막
- `\d` 는 숫자를 의미
- `+` 는 앞선 패턴이 최소 한 번 이상 반복되는 문자열을 의미

```javascript
const id = 'abc1234';

/^[A-Za-z0-9]{4,10}$/.test(id); // true
```

<br>

### **메일 주소 형식에 맞는지 검사**

```javascript
const email = 'ungmo2@gmail.com'

/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/.test(email); // true
```

<br>

### **핸드폰 번호 형식에 맞는지 검사**

```javascript
const cellphone = '010-5033-1643';

/^\d{3}-\d{3,4}-\d{4}$/.test(cellphone); // true
```

<br>

### **특수문자 포함 여부 검사**

```javascript
const target = 'abc#123';

// A-Za-z0-9 이외의 문자가 있는지 검사한다.
/[^A-Za-z0-9]/gi.test(target); // true
```
