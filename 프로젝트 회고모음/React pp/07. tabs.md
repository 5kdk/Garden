# **07. tabs**

- [**07. tabs**](#07-tabs)
  - [**useEffectë¥¼ ì´ìš©í•˜ì—¬ TabsData ê°€ì ¸ì˜¤ê¸°**](#useeffectë¥¼-ì´ìš©í•˜ì—¬-tabsdata-ê°€ì ¸ì˜¤ê¸°)
    - [**í˜„ìƒ**(Facts)](#í˜„ìƒfacts)
    - [**ë°œê²¬**(Discovery)](#ë°œê²¬discovery)
    - [**ë°°ìš´ì **(Lessons Learned)](#ë°°ìš´ì lessons-learned)
  - [**ErrorBoundaryì™€ Suspense í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ useQuery ì‚¬ìš©**](#errorboundaryì™€-suspense-í•˜ìœ„-ì»´í¬ë„ŒíŠ¸ì—ì„œ-usequery-ì‚¬ìš©)
    - [**í˜„ìƒ**(Facts)](#í˜„ìƒfacts-1)
    - [**ë°œê²¬**(Discovery)](#ë°œê²¬discovery-1)
    - [**ë°°ìš´ì **(Lessons Learned)](#ë°°ìš´ì lessons-learned-1)
  - [**ì„ ì–¸**(Declation)](#ì„ ì–¸declation)

<br>

---

## **useEffectë¥¼ ì´ìš©í•˜ì—¬ TabsData ê°€ì ¸ì˜¤ê¸°**

### **í˜„ìƒ**(Facts)

- ì´ˆê¸° ë Œë”ë§ ì‹œ tabs Dataë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ `useEffect` í›…ì„ ì‚¬ìš©í•˜ì˜€ë‹¤
- `fetchTabsData` í•¨ìˆ˜ëŠ” Promiseë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ `async`/`await`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.

  ```
  Warning: useEffect must not return anything besides a function, which is used for clean-up.

  It looks like you wrote useEffect(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

  useEffect(() => {
    async function fetchData() {
      // You can await here
      const response = await MyAPI.getData(someId);
      // ...
    }
    fetchData();
  }, [someId]); // Or [] if effect doesn't need props or state

  Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching
      at App (http://127.0.0.1:5173/src/App.jsx?t=1680084955447:23:27)

  ```

<br>

### **ë°œê²¬**(Discovery)

1. async í•¨ìˆ˜ë¥¼ setup í•¨ìˆ˜ë¡œ êµ¬í˜„ âŒ

```js
useEffect(async() => {
  try{
    //...
    const data = await fetchTabsData();
  }
  //...
},[]);
```

`async` í•¨ìˆ˜ëŠ” Promise ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. ê·¸ëŸ¬ë‚˜ `useEffect`ì˜ setup í•¨ìˆ˜ì˜ ë°˜í™˜ ê°’ì€ cleanup í•¨ìˆ˜ì—¬ì•¼ í•œë‹¤. ë”°ë¼ì„œ ìœ„ì™€ ê°™ì´ setup í•¨ìˆ˜ë¡œ async í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.

2. setupí•¨ìˆ˜ê°€ `async` í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„ âŒ

```js
useEffect(() => async() => {
  try{
    //...
    const data = await fetchTabsData();
  }
  //...
},[]);
```

ìœ„ ì½”ë“œì˜ ê²½ìš° `async` í•¨ìˆ˜ëŠ” cleanup í•¨ìˆ˜ê°€ ëœë‹¤. cleanup í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ ì‹¤í–‰ëœë‹¤. ê·¸ëŸ¬ë‚˜ ì–¸ë§ˆìš´íŠ¸ ë˜ê¸° ì „ì— ì •ìƒì ìœ¼ë¡œ tabsDataë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ë‹¤. ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ì´ìœ ëŠ” Reactì—ì„œ ì œê³µí•˜ëŠ” `Strict Mode` ì´ë‹¤. `Strict Mode`ë¡œ ì¸í•´ì„œ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ re-render ë˜ê¸° ë•Œë¬¸ì— ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ ë˜ë©´ì„œ cleanup í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤.

3. async í•¨ìˆ˜ë¥¼ ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ë¡œ ê°ì‹¼ í•¨ìˆ˜ ì •ì˜ â­•

```js
useEffect(() => {
  (async() => {
    try{
      //...
      const data = await fetchTabsData();
    }
    //...
  })()
}, []);
```

1ë²ˆê³¼ 2ë²ˆì—ì„œ ë³´ì•˜ë“¯ì´ í˜„ì¬ ìƒí™©ì—ì„œëŠ” `useEffect`ì˜ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ëŠ” setupí•¨ìˆ˜ê°€ `undefined`ë¥¼ ë°˜í™˜í•´ì•¼ í•˜ë©°, ë‚´ë¶€ì—ì„œ `fetchTabsData`ë¥¼ ì‹¤í–‰í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ `await`ë¡œ ë°›ì•„ì™€ì•¼ í•œë‹¤.
ë”°ë¼ì„œ `async` í•¨ìˆ˜ë¥¼ ì¦‰ì‹œ ì‹¤í–‰í•¨ìˆ˜ë¡œ ê°ì‹¼ í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ì—¬ setup í•¨ìˆ˜ë¡œ ì „ë‹¬í•˜ì˜€ë‹¤.

<br>

### **ë°°ìš´ì **(Lessons Learned)

- `useEffect` ì˜ setup í•¨ìˆ˜ëŠ” cleanup í•¨ìˆ˜ ë˜ëŠ” `undefined`ë¥¼ ë°˜í™˜í•œë‹¤.
- ì„ ì–¸í•˜ê³  í˜¸ì¶œí•˜ëŠ” ë°˜ë©´, í•¨ìˆ˜ë¥¼ ì§ì ‘ ì •ì˜í•˜ê³  í˜¸ì¶œ(ì¦‰ì‹œ ì‹¤í–‰í•¨ìˆ˜)í•˜ë©´ ë” ê°„ê²°í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- Strict ëª¨ë“œì—ì„œëŠ” re-renderê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— cleanup í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤.

<br>

## **ErrorBoundaryì™€ Suspense í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ useQuery ì‚¬ìš©**

### **í˜„ìƒ**(Facts)

- ReactQueryë¥¼ ì‚¬ìš©í•˜ë©´ì„œ `ErrorBoundary`ì™€ `Suspense`ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.
- ì²˜ìŒì— ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í•˜ì§€ ì•Šê³  ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸(App)ì—ì„œ ëª¨ë“  ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ê³ , App ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ í•˜ìœ„ì˜ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë“¤ì„ `<ErrorBoundary>`ì™€ `<Suspense>`ë¡œ ê°ìŒŒë‹¤.
- ì´ ë•Œ, Loaderê°€ ì¶œë ¥ë˜ì§€ ì•ŠëŠ” í˜„ìƒì´ ë°œìƒí–ˆë‹¤.

<br>

### **ë°œê²¬**(Discovery)

- ìœ„ì™€ ê°™ì´ êµ¬í˜„í–ˆì„ ë•Œ, Suspenseê°€ `isLoading` ìƒíƒœë¥¼ ìºì¹˜í•˜ì§€ ëª»í–ˆë‹¤.
- ë£¨íŠ¸(App) ì»´í¬ë„ŒíŠ¸ì—ì„œ useQueryë¥¼ ì‚¬ìš©í•˜ì˜€ê¸° ë•Œë¬¸ì—, ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸ í•˜ìœ„ì— ìˆëŠ” SuspenseëŠ” ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì˜ `isLoading`ì„ ìºì¹˜í•˜ì§€ ëª»í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì„ ë°œê²¬í–ˆë‹¤.

<br>

### **ë°°ìš´ì **(Lessons Learned)

- `ErrorBoundary`ì™€ `Suspense`ëŠ” í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•œ ReactQueryì— ëŒ€í•œ `isLoading`ê³¼ `error`ë¥¼ ìºì¹˜í•œë‹¤.
- ë”°ë¼ì„œ ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸ ë¿ë§Œ ì•„ë‹ˆë¼ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ `error`ë‚˜ `isLoading`ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ìœ„í•´ `ErrorBoundary`ì™€ `Suspense`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

<br>

## **ì„ ì–¸**(Declation)

- `Strict mode`ì—ì„œëŠ” re-renderê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì˜ˆê¸°ì¹˜ ëª»í•œ ì˜¤ë¥˜ë¥¼ ë§Œë‚  ìˆ˜ ìˆë‹¤.
  - íŠ¹íˆ, ì´ë²ˆ ë¯¸ì…˜ì˜ ì‹¤ìˆ˜(useEffect, cleanup func)ëŠ” ë°°í¬ê¹Œì§€ ë„˜ì–´ê°„ë‹¤ë©´ ë°”ë¡œ ì˜¤ë¥˜ë¥¼ ë§Œë‚  ìˆ˜ ìˆì—ˆë‹¤. ì£¼ì˜í•˜ì!
  - Hookì´ë‚˜ í•¨ìˆ˜, ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì‚¬ìš©ë²•ì„ ì˜ ìˆ™ì§€í•˜ê³  ì‚¬ìš©í•˜ì!
  - ì˜¤ë¥˜ ë©”ì„¸ì§€ë¥¼ ì˜ ì½ì!
- ë°”ë‹ë¼ jsë¥¼ ë‹¤ë£¨ë˜ ìŠµê´€ì—ì„œ ë²—ì–´ë‚˜ ê´€ë¦¬í•˜ê³  ìˆëŠ” ìƒíƒœë¥¼ ì˜ í™œìš©í•˜ì—¬ UIë¥¼ ê·¸ë¦¬ì.

<br>

---

**0ï¸âƒ£7ï¸âƒ£ Tabs ìˆ˜ì—… ë‚´ìš© ì •ë¦¬ ğŸ‘€**

Appì„ ê°ì‹¸ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ ( ex: Provider, router ) ìœ„ì¹˜ : App vs Main

- ì¼ê´€ì„± ìœ ì§€í•˜ê¸° ( Appì— ìœ„ì¹˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ. )
  render props : ì»´í¬ë„ŒíŠ¸ë¥¼ returní•˜ëŠ” í•¨ìˆ˜ ( ex: fallbackRender )

react-query

- ìºì‹± ê¸°ëŠ¥
