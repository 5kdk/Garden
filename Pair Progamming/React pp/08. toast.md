# **08. toast**

- [**08. toast**](#08-toast)
  - [**submitë²„íŠ¼ íƒ€ì… ê°€ì ¸ì˜¤ê¸°: e.nativeEvent.submitter**](#submitë²„íŠ¼-íƒ€ì…-ê°€ì ¸ì˜¤ê¸°-enativeeventsubmitter)
    - [**í˜„ìƒ**(Facts)](#í˜„ìƒfacts)
    - [**ë°œê²¬**(Discovery)](#ë°œê²¬discovery)
    - [**ë°°ìš´ì **(Lessons Learned)](#ë°°ìš´ì lessons-learned)
  - [**Form Field ê°’ ê°€ì ¸ì˜¤ê¸°: HTMLFormElement.elements / e.native.target**](#form-field-ê°’-ê°€ì ¸ì˜¤ê¸°-htmlformelementelements--enativetarget)
    - [**í˜„ìƒ**(Facts)](#í˜„ìƒfacts-1)
    - [**ë°œê²¬**(Discovery)](#ë°œê²¬discovery-1)
    - [**ë°°ìš´ì **(Lessons Learned)](#ë°°ìš´ì lessons-learned-1)
  - [**Positionì— ë”°ë¥¸ toastList ê´€ë¦¬: state ê°ì²´ vs selector**](#positionì—-ë”°ë¥¸-toastlist-ê´€ë¦¬-state-ê°ì²´-vs-selector)
    - [**í˜„ìƒ**(Facts)](#í˜„ìƒfacts-2)
    - [**ë°œê²¬**(Discovery)](#ë°œê²¬discovery-2)
    - [**ë°°ìš´ì **(Lessons Learned)](#ë°°ìš´ì lessons-learned-2)
  - [**ì„ ì–¸**(Declation)](#ì„ ì–¸declation)

<br>

## **submitë²„íŠ¼ íƒ€ì… ê°€ì ¸ì˜¤ê¸°: e.nativeEvent.submitter**

### **í˜„ìƒ**(Facts)

- 4ê°€ì§€ì˜ íƒ€ì…ì˜ submit ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ, ë²„íŠ¼ íƒ€ì…ì— ë§ëŠ” Toastë¥¼ ìƒì„±í•´ì•¼í•œë‹¤.
- ì»´í¬ë„ŒíŠ¸ì— propsë¡œ íƒ€ì… ì •ë³´ë¥¼ ì „ë‹¬í•˜ì—¬ë„ html ìš”ì†Œì—ëŠ” propsê°€ ì „ë‹¬ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— `onClick`ì´ë²¤íŠ¸ì˜ `e.target`ì„ ì´ìš©í•´ì„œ í† ìŠ¤íŠ¸ íƒ€ì… ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ì—†ë‹¤.

<br>

### **ë°œê²¬**(Discovery)

1. `e.target.textContent`ë¥¼ ì´ìš©í•˜ì—¬ í† ìŠ¤íŠ¸ íƒ€ì… ì •ë³´ ì–»ê¸°
   - `textContent`ê°€ ë³€ê²½ë  ê°€ëŠ¥ì„±ì´ ìˆë‹¤. ë”°ë¼ì„œ ì¬ì‚¬ìš©ì„±ì„ ê³ ë ¤í•˜ì˜€ì„ ë•Œ ì˜³ì§€ ì•Šì€ ë°©ë²•ì´ë‹¤.
2. `SubmitEvent.submitter`ë¥¼ ì´ìš©í•˜ì—¬ submit ë²„íŠ¼ ì ‘ê·¼í•˜ê¸°
   - submitë²„íŠ¼ì— nameìœ¼ë¡œ í† ìŠ¤íŠ¸ì˜ íƒ€ì…ì„ ì§€ì •í•˜ê³ , `e.nativeEvent.submitter.name`ìœ¼ë¡œ ì¶”ê°€í•  í† ìŠ¤íŠ¸ íƒ€ì…ì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.

<br>

### **ë°°ìš´ì **(Lessons Learned)

- `SubmitEvent.submitter`ì€ í•´ë‹¹ formì— submitì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ ìš”ì†Œë¥¼ ê°€ë¦¬í‚¨ë‹¤.
- Reactì—ì„œ ì œê³µí•˜ëŠ” ì´ë²¤íŠ¸ëŠ” í•©ì„± ì´ë²¤íŠ¸<sup>Synthetic Event</sup>ì´ë¯€ë¡œ `e.nativeEvent` (Dom Event)ë¥¼ ì´ìš©í•˜ì—¬ submitterì— ì ‘ê·¼í•´ì•¼ í•œë‹¤.

<br>

## **Form Field ê°’ ê°€ì ¸ì˜¤ê¸°: HTMLFormElement.elements / e.native.target**

### **í˜„ìƒ**(Facts)

- ìƒì„±í•  Toastì˜ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•´ form field ìš”ì†Œì— ì ‘ê·¼í•´ì•¼ í•œë‹¤.
- ê° ìš”ì†Œë“¤ì„ ì œì–´ ì»´í¬ë„ŒíŠ¸ë‚˜ ë¹„ì œì–´ ì»´í¬ë„ŒíŠ¸ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.
- ì‚¬ìš©ìê°€ formì˜ ê°’ì„ ë³€ê²½ì‹œí‚¬ ë•Œ ë§ˆë‹¤ ê°’ì„ ê´€ë¦¬í•  í•„ìš” ì—†ì´ submit ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œì— ê°’ì„ ì·¨ë“í•˜ë©´ ëœë‹¤.
- ë”°ë¼ì„œ ë¹„ì œì–´ ì»´í¬ë„ŒíŠ¸ë¡œ ê´€ë¦¬í•˜ë©°, `autoClose`ì˜ ê²½ìš° checked ìƒíƒœì¼ ë•Œë§Œ `autoCloseDelay`ê°€ í™œì„±í™” ë˜ë¯€ë¡œ `autoClose`ëŠ” ì œì–´ ì»´í¬ë„ŒíŠ¸ë¡œ ê´€ë¦¬í•œë‹¤.

<br>

### **ë°œê²¬**(Discovery)

1.  `useRef`

    - ë¹„ì œì–´ ì»´í¬ë„ŒíŠ¸ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ `useRef` í›…ì„ ì‚¬ìš©í•˜ì˜€ìœ¼ë©°, `autoClose`(ì œì–´ì»´í¬ë„ŒíŠ¸)ëŠ” `useState`ë¥¼ ì´ìš©í•˜ì˜€ë‹¤.

    - ê°’ì— ì ‘ê·¼í•  ë•Œ `ref.current`ë¥¼ ì´ìš©í•´ì•¼í•˜ê³ , ê° í•„ë“œì— `ref`ë¥¼ ì§€ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.

    ```js
    const [autoClose, setAutoClose] = useState(true);

    const messageRef = useRef();
    const positionRef = useRef();
    const autoCloseDelayRef = useRef();
    const closeOnClickRef = useRef();
    ```

2.  `HTMLFormElement.elements` / `e.nativeEvent.target`

    - `HTMLFormElement.elements`ëŠ” formì˜ fieldë¥¼ ê°€ì§€ê³  ìˆëŠ” HTMLFormControlsCollectionì´ë‹¤.
    - ë°°ì—´ì²˜ëŸ¼ fieldì˜ ìˆœì„œ(ì¸ë±ìŠ¤)ë¡œ ê° fieldì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë©°, ê° fieldjuì— `name`ì´ë‚˜ `id`ë¥¼ ì§€ì •í•˜ì—¬ í”„ë¡œí¼í‹° í‚¤ë¡œ ì´ìš©í•  ìˆ˜ ìˆë‹¤.
    - `HTMLFormElement.elements`ì™€ `e.native.target`ëŠ” ê°™ì€ HTMLFormControlsCollectionë¥¼ ê°–ëŠ”ë‹¤.
    - ë”°ë¼ì„œ submitterë¥¼ ì‚¬ìš©í•  ë•Œ nativeEventë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ì¼ê´€ì„±ì„ ìœ„í•´ `e.nativeEvent.target`ì„ ì´ìš©í•˜ì—¬ ê° fieldì— ì ‘ê·¼í•˜ì˜€ë‹¤.

          ```js
          const { message, position, autoCloseDelay, closeOnClick } = e.nativeEvent.target;
          ```
          - autoCloseëŠ” ì œì–´ ì»´í¬ë„ŒíŠ¸ì´ë¯€ë¡œ useStateë¥¼ ì‚¬ìš©í•˜ì—¬ ê´€ë¦¬í•œë‹¤.

      <br>

### **ë°°ìš´ì **(Lessons Learned)

- `HTMLFormElement.elements` / `e.nativeEvent.target`ëŠ” HTMLFormControlsCollectionì„ ê°’ìœ¼ë¡œ ê°€ì§„ë‹¤.
- fieldì— name(id)ì„ ì§€ì •í•˜ë©´ ê°ì²´ ë””ìŠ¤í„°ëŸ­ì³ë§ í• ë‹¹ì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤.

<br>

## **Positionì— ë”°ë¥¸ toastList ê´€ë¦¬: state ê°ì²´ vs selector**

### **í˜„ìƒ**(Facts)

- toastëŠ” bottom-right, bottom-left, top-right, top-left ì´ 4ê°œì˜ ìœ„ì¹˜ì—ì„œ ë‚˜íƒ€ë‚  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ì´ 4ê°€ì§€ positionì— ë”°ë¥¸ toastListë¥¼ ê´€ë¦¬í•´ì•¼ í•œë‹¤.
- ì „ì—­ ìƒíƒœë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ recoilì„ ì‚¬ìš©í•˜ì˜€ë‹¤.
- 4ê°œì˜ positionì— ë”°ë¼ listë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²• ë‘ ê°€ì§€ë¥¼ ê³ ë ¤í•˜ì˜€ë‹¤

  - ê°ì²´íƒ€ì…ì˜ ìƒíƒœ í•˜ë‚˜ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•
    ```js
    const toastListState = atom({
      key: 'toastListState',
      default: {
        'bottom-right': [],
        'bottom-left': [],
        'top-right': [],
        'top-left': [],
      },
    });
    ```
  - ì „ì²´ toastList ìƒíƒœë¥¼ ê´€ë¦¬í•˜ë©°, selectorë¡œ positionì— ë”°ë¥¸ toastListë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•

    ```js
    const toastListState = atom({
      key: 'toastListState',
      default: [],
    });

    const BottomRightToastListState = selector({
      key: 'BottomRightToastListState',
      get: ({ get }) =>
        get(toastListState).filter(
          ({ position }) => position === 'bottom-right'
        ),
    });

    // ...
    ```

<br>

### **ë°œê²¬**(Discovery)

- positionì„ í”„ë¡œí¼í‹° í‚¤ë¡œ ê°–ëŠ” ê°ì²´ íƒ€ì…ì˜ ìƒíƒœë¡œ ê´€ë¦¬í•  ê²½ìš°, toastListì—ì„œ toastë¥¼ ì¶”ê°€í•  ë•Œì™€ ì œê±°í•  ë•Œ ëª¨ë‘ positionì— ë”°ë¥¸ ë°°ì—´ì„ ë¨¼ì € ì°¾ê³ , í•´ë‹¹ ë°°ì—´ì— ì¶”ê°€í•˜ê±°ë‚˜ ì œê±°í•´ì•¼í•œë‹¤.

  ( ì¶”ê°€í•  ë•Œ í•„ìš”í•œ ì •ë³´ : position, ì‚­ì œí•  ë•Œ í•„ìš”í•œ ì •ë³´ : position, id)

- selectorë¡œ ê´€ë¦¬í•  ê²½ìš°, positionì„ ê³ ë ¤í•˜ì§€ ì•Šê³ , toastë¥¼ ì¶”ê°€í•˜ê³  ì‚­ì œí•  ìˆ˜ ìˆë‹¤.

  ( ì¶”ê°€í•  ë•Œ í•„ìš”í•œ ì •ë³´ : X , ì‚­ì œí•  ë•Œ í•„ìš”í•œ ì •ë³´ : id )

<br>

### **ë°°ìš´ì **(Lessons Learned)

- í•˜ë‚˜ì˜ stateë¡œ ë³µì¡í•œ ê°ì²´ë¡œ ê´€ë¦¬í•˜ê±°ë‚˜ ì—¬ëŸ¬ ê°œì˜ ìƒíƒœë¡œ ê´€ë¦¬í•˜ì§€ ì•Šê³ , recoil ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” selectorë¥¼ ì´ìš©í•˜ì—¬ í¸ë¦¬í•˜ê²Œ íŒŒìƒìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.
- <br>

## **ì„ ì–¸**(Declation)

-

<br>

---

**0ï¸âƒ£8ï¸âƒ£ Toast ìˆ˜ì—… ë‚´ìš© ì •ë¦¬ ğŸ‘€**

- switchë¬¸ì€ scopeë¥¼ ë§Œë“ ë‹¤.
- ToastCreator <- Toasts : ToastCreatorì€ Toastsë¥¼ ì•Œì•„ì•¼ í•˜ì§€ë§Œ, ToastsëŠ” ToastCreatorë¥¼ ëª°ë¼ë„ ëœë‹¤.
  ( ì‘ì§‘ë„ ë†’ì´ê³ , ê²°í•©ë„ëŠ” ë‚®ì¶”ê¸° )
  => ì—°ê²°ê³ ë¦¬ëŠ” toastHandlers í•˜ë‚˜!
  - í™”ì‚´í‘œëŠ” ë‹¨ë°©í–¥ì´ê³  ì–‡ì„ ìˆ˜ë¡(ì—°ê²°ê³ ë¦¬ê°€ ì—†ì„ìˆ˜ë¡) ì¢‹ìŒ
- toastì™€ ëª¨ë‹¬(í˜ì´ì§€ì— ì¢…ì†ì ì´ì§€ ì•Šì€ ex: ê´‘ê³ )ì„ ì‚¬ìš©í•  ë•Œ ì£¼ë¡œ portal ì‚¬ìš©
